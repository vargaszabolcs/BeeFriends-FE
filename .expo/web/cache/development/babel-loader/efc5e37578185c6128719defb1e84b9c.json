{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport axios from \"axios\";\nimport { useAssets } from \"expo-asset\";\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport ExtraLink from \"../components/login/ExtraLink\";\nimport LoginInputs from \"../components/login/LoginInputs\";\nimport SubmitButton from \"../components/login/SubmitButton\";\nimport Network from \"../constants/Network\";\nimport { saveLocalData } from \"../localStorage/storageHelpers\";\nimport { StorageKeys } from \"../localStorage/storageKeys\";\nimport { useDispatch } from \"react-redux\";\nimport { logIn } from \"../store/appSlice\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar LoginScreen = function LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isLoading = _useState8[0],\n      setIsLoading = _useState8[1];\n\n  var _useAssets = useAssets([require(\"../../assets/images/bee_logo.png\")]),\n      _useAssets2 = _slicedToArray(_useAssets, 1),\n      assets = _useAssets2[0];\n\n  var dispatch = useDispatch();\n\n  var onSubmit = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      setIsLoading(true);\n      var data = {\n        email: email,\n        password: password\n      };\n\n      try {\n        var response = yield axios.post(Network.API_URL + \"/auth/login\", data, {\n          timeout: 5000\n        });\n\n        if (response.data.error) {\n          setError(response.data.error);\n          setIsLoading(false);\n        } else {\n          setError(\"\");\n          var userData = {\n            token: response.data.token,\n            email: email,\n            full_name: response.data.full_name\n          };\n          saveLocalData(StorageKeys.USER_DATA, JSON.stringify(userData), true);\n          dispatch(logIn(userData));\n        }\n      } catch (err) {\n        setError(\"Something went wrong. Please try again later and check your internet connection!\");\n        setIsLoading(false);\n        console.error(err);\n      }\n    });\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [assets ? _jsx(Image, {\n      source: assets[0],\n      style: styles.logo\n    }) : null, _jsx(LoginInputs, {\n      email: email,\n      password: password,\n      onEmailChange: setEmail,\n      onPasswordChange: setPassword,\n      isDisabled: isLoading\n    }), error ? _jsx(Text, {\n      style: styles.error,\n      children: error\n    }) : null, _jsx(SubmitButton, {\n      text: \"Login\",\n      onPress: onSubmit,\n      isDisabled: isLoading\n    }), _jsx(ExtraLink, {\n      text: \"Forgot password?\",\n      onPress: function onPress() {\n        console.log(\"forgot\");\n      }\n    }), _jsx(ExtraLink, {\n      text: \"I don't have an account!\",\n      onPress: function onPress() {\n        navigation.navigate(\"Signup\");\n      }\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\"\n  },\n  logo: {\n    width: 300,\n    height: 300\n  },\n  error: {\n    color: \"red\",\n    width: \"90%\"\n  }\n});\nexport default LoginScreen;","map":{"version":3,"names":["axios","useAssets","React","useState","SafeAreaView","ExtraLink","LoginInputs","SubmitButton","Network","saveLocalData","StorageKeys","useDispatch","logIn","LoginScreen","navigation","email","setEmail","password","setPassword","error","setError","isLoading","setIsLoading","require","assets","dispatch","onSubmit","data","response","post","API_URL","timeout","userData","token","full_name","USER_DATA","JSON","stringify","err","console","styles","container","logo","log","navigate","StyleSheet","create","alignItems","width","height","color"],"sources":["D:/DEV/react-native/BeeFriends-FE/src/screens/LoginScreen.tsx"],"sourcesContent":["import axios, { AxiosResponse } from \"axios\";\r\nimport { useAssets } from \"expo-asset\";\r\nimport React, { useState } from \"react\";\r\nimport { StyleSheet, Image, ImageSourcePropType, Text } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\n\r\nimport ExtraLink from \"../components/login/ExtraLink\";\r\nimport LoginInputs from \"../components/login/LoginInputs\";\r\nimport SubmitButton from \"../components/login/SubmitButton\";\r\nimport Network from \"../constants/Network\";\r\nimport { IUser, LoginResponse, LoginStackParamList } from \"../types\";\r\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\r\nimport { saveLocalData } from \"../localStorage/storageHelpers\";\r\nimport { StorageKeys } from \"../localStorage/storageKeys\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logIn } from \"../store/appSlice\";\r\n\r\ntype ILoginScreenProps = NativeStackScreenProps<LoginStackParamList, \"Login\">;\r\n\r\nconst LoginScreen: React.FC<ILoginScreenProps> = ({ navigation }) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const [assets] = useAssets([require(\"../../assets/images/bee_logo.png\")]);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = async () => {\r\n        setIsLoading(true);\r\n        const data = { email, password };\r\n        try {\r\n            const response: AxiosResponse<LoginResponse> = await axios.post(\r\n                Network.API_URL + \"/auth/login\",\r\n                data,\r\n                { timeout: 5000 },\r\n            );\r\n            if (response.data.error) {\r\n                setError(response.data.error);\r\n                setIsLoading(false);\r\n            } else {\r\n                setError(\"\");\r\n                const userData: IUser = {\r\n                    token: response.data.token,\r\n                    email: email,\r\n                    full_name: response.data.full_name,\r\n                };\r\n                saveLocalData(StorageKeys.USER_DATA, JSON.stringify(userData), true);\r\n                dispatch(logIn(userData));\r\n            }\r\n        } catch (err) {\r\n            setError(\r\n                \"Something went wrong. Please try again later and check your internet connection!\",\r\n            );\r\n            setIsLoading(false);\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <SafeAreaView style={styles.container}>\r\n            {assets ? (\r\n                <Image\r\n                    source={assets[0] as ImageSourcePropType}\r\n                    style={styles.logo}\r\n                />\r\n            ) : null}\r\n\r\n            <LoginInputs\r\n                email={email}\r\n                password={password}\r\n                onEmailChange={setEmail}\r\n                onPasswordChange={setPassword}\r\n                isDisabled={isLoading}\r\n            />\r\n\r\n            {error ? <Text style={styles.error}>{error}</Text> : null}\r\n\r\n            <SubmitButton\r\n                text=\"Login\"\r\n                onPress={onSubmit}\r\n                isDisabled={isLoading}\r\n            />\r\n\r\n            <ExtraLink\r\n                text=\"Forgot password?\"\r\n                onPress={() => {\r\n                    console.log(\"forgot\");\r\n                }}\r\n            />\r\n            <ExtraLink\r\n                text=\"I don't have an account!\"\r\n                onPress={() => {\r\n                    navigation.navigate(\"Signup\");\r\n                }}\r\n            />\r\n        </SafeAreaView>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        alignItems: \"center\",\r\n    },\r\n    logo: {\r\n        width: 300,\r\n        height: 300,\r\n    },\r\n    error: {\r\n        color: \"red\",\r\n        width: \"90%\",\r\n    },\r\n});\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}